# direnv configuration for {{PROJECT_NAME}} (API project)

# Source dev-infra environment if available
if [ -f ~/.config/dev-infra/env.sh ]; then
    source ~/.config/dev-infra/env.sh
fi

# Add local bin to PATH
PATH_add bin
PATH_add scripts
PATH_add node_modules/.bin

# Project identity
export PROJECT_NAME="{{PROJECT_NAME}}"
export PROJECT_ROOT="$PWD"

# API settings
export NODE_ENV="${NODE_ENV:-development}"
export PORT="${PORT:-3000}"
export HOST="${HOST:-localhost}"

# Database (loaded from 1Password)
export_function get_secret() {
    dev-infra secret "$1" 2>/dev/null || op read "$1"
}

# Load .env for non-secret config
dotenv_if_exists .env
